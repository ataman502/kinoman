(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60e86b90"],{"1d3a":function(e,t,n){"use strict";var r=n("8ffd"),a=n.n(r);a.a},"4d9e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"items collection"},[e.loading?n("Loader"):n("div",{staticClass:"container-fluid"},[n("ul",{staticClass:"row justify-content-arround"},e._l(e.newRelease.films,(function(e){return n("FilmItemInfo",{key:e.filmId,staticClass:"col-xl-4 col-md-6",attrs:{"item-info":e}})})),1),e.lazyLoading?n("Loader"):e._e(),e.page<=e.newRelease.pagesCount-1?n("button",{staticClass:"lazyload",on:{click:function(t){return t.preventDefault(),e.loadMore(t)}}},[e._v(" Загрузить больше ")]):e._e()],1),n("span",{ref:"more",staticClass:"more"})],1)},a=[],o=(n("4160"),n("159b"),n("96cf"),n("1da1")),s=n("42e1"),c={name:"NewRelease",data:function(){return{newRelease:{},page:1,loading:!0,lazyLoading:!1}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getNewRelease();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.lazyLoad();case 1:case"end":return t.stop()}}),t)})))()},components:{FilmItemInfo:s["a"]},methods:{getNewRelease:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new Date,t.next=3,e.currentYear(n);case 3:return r=t.sent,a={rating:{from:"0",to:"10"},year:{from:r,to:r},page:1},t.prev=5,t.next=8,e.$store.dispatch("getNewRelease",a);case 8:e.newRelease=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](5),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[5,11]])})))()},currentMonth:function(e){var t={month:"long"};return new Intl.DateTimeFormat("en-EN",t).format(e)},currentYear:function(e){var t={year:"numeric"};return new Intl.DateTimeFormat("en-EN",t).format(e)},loadMore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.lazyLoading=!0,t.next=3,e.getMoreNewRelease();case 3:e.lazyLoading=!1;case 4:case"end":return t.stop()}}),t)})))()},getMoreNewRelease:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new Date,t.next=3,e.currentYear(n);case 3:return r=t.sent,e.page++,a={rating:{from:"0",to:"10"},year:{from:r,to:r},page:e.page},t.prev=6,t.next=9,e.$store.dispatch("getNewRelease",a);case 9:o=t.sent,o.films.forEach((function(t){e.newRelease.films.push(t)})),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](6),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[6,13]])})))()},lazyLoad:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={root:null,threshold:0},r=new IntersectionObserver((function(t,n){t.forEach((function(t){t.isIntersecting&&(!e.loading&&e.page<=e.newRelease.pagesCount-1&&e.loadMore(),n.unobserve())}))}),n),a=e.$refs.more,r.observe(a);case 4:case"end":return t.stop()}}),t)})))()}}},i=c,u=(n("1d3a"),n("2877")),l=Object(u["a"])(i,r,a,!1,null,null,null);t["default"]=l.exports},"8ffd":function(e,t,n){}}]);
//# sourceMappingURL=chunk-60e86b90.161b9964.js.map