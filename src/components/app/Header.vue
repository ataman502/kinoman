<template>
  <header
    v-scroll="handleScroll"
    class="header"
    :class="{fixed: headerFixed, fade: fade}"
  >
    <div class="container-fluid">
      <div class="row justify-content-between">
        <div class="col-10">
          <h2
            href=""
            class="header__title"
          >
            {{ pageTitle }}
          </h2>
        </div>
        <nav class="col nav">
          <a
            href=""
            class="nav__link"
          >
            <svg
              viewBox="-42 0 512 512.002"
            >
              <path
                fill="currentcolor"
                d="m210.351562 246.632812c33.882813 0 63.222657-12.152343 87.195313-36.128906 23.972656-23.972656 36.125-53.304687 36.125-87.191406 0-33.875-12.152344-63.210938-36.128906-87.191406-23.976563-23.96875-53.3125-36.121094-87.191407-36.121094-33.886718 0-63.21875 12.152344-87.191406 36.125s-36.128906 53.308594-36.128906 87.1875c0 33.886719 12.15625 63.222656 36.132812 87.195312 23.976563 23.96875 53.3125 36.125 87.1875 36.125zm0 0"
              />
              <path
                fill="currentcolor"
                d="m426.128906 393.703125c-.691406-9.976563-2.089844-20.859375-4.148437-32.351563-2.078125-11.578124-4.753907-22.523437-7.957031-32.527343-3.308594-10.339844-7.808594-20.550781-13.371094-30.335938-5.773438-10.15625-12.554688-19-20.164063-26.277343-7.957031-7.613282-17.699219-13.734376-28.964843-18.199219-11.226563-4.441407-23.667969-6.691407-36.976563-6.691407-5.226563 0-10.28125 2.144532-20.042969 8.5-6.007812 3.917969-13.035156 8.449219-20.878906 13.460938-6.707031 4.273438-15.792969 8.277344-27.015625 11.902344-10.949219 3.542968-22.066406 5.339844-33.039063 5.339844-10.972656 0-22.085937-1.796876-33.046874-5.339844-11.210938-3.621094-20.296876-7.625-26.996094-11.898438-7.769532-4.964844-14.800782-9.496094-20.898438-13.46875-9.75-6.355468-14.808594-8.5-20.035156-8.5-13.3125 0-25.75 2.253906-36.972656 6.699219-11.257813 4.457031-21.003906 10.578125-28.96875 18.199219-7.605469 7.28125-14.390625 16.121094-20.15625 26.273437-5.558594 9.785157-10.058594 19.992188-13.371094 30.339844-3.199219 10.003906-5.875 20.945313-7.953125 32.523437-2.058594 11.476563-3.457031 22.363282-4.148437 32.363282-.679688 9.796875-1.023438 19.964844-1.023438 30.234375 0 26.726562 8.496094 48.363281 25.25 64.320312 16.546875 15.746094 38.441406 23.734375 65.066406 23.734375h246.53125c26.625 0 48.511719-7.984375 65.0625-23.734375 16.757813-15.945312 25.253906-37.585937 25.253906-64.324219-.003906-10.316406-.351562-20.492187-1.035156-30.242187zm0 0"
              />
            </svg>
          </a>

          <a
            href=""
            class="nav__link"
          >
            <svg
              viewBox="0 0 512 512"
            >
              <path
                fill="currentColor"
                d="m262.689 176.286c-2.207-.192-4.431-.286-6.689-.286-44.112 0-80 35.888-80 80s35.888 80 80 80c2.258 0 4.482-.094 6.611-.279 41.187-3.386 73.389-38.4 73.389-79.721s-32.202-76.335-73.311-79.714z"
              /><path
                fill="currentColor"
                d="m495.594 216.407c-10.58-10.58-24.641-16.407-39.594-16.407h-16.299c-3.606-11.863-8.359-23.331-14.212-34.292l11.534-11.534c21.828-21.828 21.83-57.354.001-79.197-10.573-10.574-24.638-16.397-39.604-16.397-14.959 0-29.02 5.823-39.594 16.396l-11.534 11.534c-10.961-5.852-22.429-10.605-34.292-14.212v-16.298c0-26.523-18.847-49.604-44.851-54.887-3.677-.738-7.428-1.113-11.149-1.113-14.953 0-29.014 5.827-39.595 16.407-10.579 10.58-16.405 24.641-16.405 39.593v16.298c-11.863 3.606-23.331 8.359-34.292 14.212l-11.534-11.534c-21.828-21.828-57.354-21.83-79.198 0-10.573 10.574-16.396 24.639-16.396 39.604 0 14.958 5.823 29.02 16.396 39.594l11.534 11.534c-5.853 10.961-10.605 22.43-14.212 34.292h-16.298c-30.879 0-56 25.122-56 56 0 14.952 5.826 29.013 16.406 39.593s24.641 16.407 39.594 16.407h16.299c3.606 11.863 8.359 23.331 14.212 34.292l-11.534 11.534c-21.828 21.828-21.83 57.354-.001 79.197 10.573 10.573 24.639 16.396 39.604 16.396 14.959 0 29.02-5.823 39.594-16.396l11.534-11.534c10.961 5.853 22.429 10.605 34.292 14.212v16.299c0 30.878 25.121 56 56 56 3.721 0 7.472-.375 11.149-1.113.012-.002.023-.005.035-.007 10.773-2.188 20.597-7.474 28.41-15.287 10.58-10.58 16.406-24.641 16.406-39.593v-16.298c11.863-3.606 23.331-8.359 34.292-14.212l11.534 11.534c10.915 10.915 25.251 16.373 39.594 16.371 14.339-.001 28.684-5.458 39.604-16.372 10.572-10.574 16.396-24.639 16.396-39.604 0-14.958-5.823-29.02-16.396-39.594l-11.534-11.534c5.853-10.961 10.605-22.43 14.212-34.292h16.298c30.879 0 56-25.122 56-56 0-14.951-5.826-29.012-16.406-39.592zm-157.37 115.645c-19.093 20.633-44.987 33.259-72.913 35.555-2.972.259-6.13.394-9.311.394-61.757 0-112-50.243-112-112s50.243-112 112-112c3.181 0 6.339.135 9.389.4 27.848 2.289 53.742 14.915 72.835 35.548 19.201 20.749 29.776 47.759 29.776 76.051s-10.575 55.302-29.776 76.052z"
              />
            </svg>
          </a>
        </nav>
      </div>
    </div>
  </header>
</template>

<script>
export default {
  name: 'Header',
  data: () => ({
    headerFixed: false,
    fade: false,
    scrollPrev: 0
  }),
  computed: {
    pageTitle () {
      return this.$route.meta.title || 'Ваше Кино'
    }
  },
  methods: {
    handleScroll (evt, el) {
      const scroll = window.scrollY
      if (scroll > 200 && scroll > this.scrollPrev) {
        this.fade = true
        this.headerFixed = false
      } else if (scroll <= 10) {
        this.headerFixed = false
        this.fade = false
      } else {
        this.headerFixed = true
        this.fade = false
      }

      this.scrollPrev = scroll
    }
  }
}
</script>

<style lang="less">
@import "@/assets/style/vars/vars.module";

.header__container {
  position: fixed;
  top: 0;
  right: 0;
  z-index: 11;
}

.header {
  border-bottom: @border-width solid fade(@colors__grays--lighter, 20%);
  overflow: hidden;
  width: 100%;
  transition: @transition-duration @transition-timing-function;
  padding-right: 10px;

  &.fixed {
    background-color: fade(@colors__body, 100%);
    box-shadow: @shadows__coords-x @shadows__coords-y @shadows__size
      fade(darken(@colors__body, 50%), 50%);
  }

  &.fade {
    transform: translateY(-100%);
  }
}

.header__title {
  font-family: @font-family__sans__black;
  color: @colors__grays--lighter;
  font-size: @font-size--large - 5;
  line-height: @line-height--large;
  user-select: none;
  font-weight: 900;
  transition: @transition-duration @transition-timing-function;
}

.nav {
  display: flex;
  justify-content: flex-end;
  align-items: center;
}

.nav__link {
  display: inline-block;
  color: @colors__grays--lighter;
  height: 100%;
  transition: @transition-duration @transition-timing-function;
  padding: 10px;

  svg {
    width: @font-size--large;
  }

  &:hover,
  &:focus,
  &:active {
    background-color: fade(#fff, 10%);
    color: @colors__green;
  }
}
</style>
